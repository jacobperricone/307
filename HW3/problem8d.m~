%%
clear all
close all
%%




%% HW1


a = [1, -1, 0; 0, 0, 2];

A = zeros(3,3,3);

for i=1:3
    A(:,:,i) = [a(:,i); -1]*[a(:,i); -1]'
end

X = eye(3,3)
x_initial = [.8;1]
X(1:2,end) = x_initial
X(end,1:2)= x_initial'

x_true = [.85;.05]
b = (pdist2(x_true', a').^2)';
mus = linspace(0,10e-4,4)



f = @(A,X,mu)(.5*norm(sum(squeeze(sumdot(A, repmat(X,1,1,size(A,3)))) - b,2).^2 - mu*log(det(X)))
df = @(A,X,mu)(X*sum(A .* repmat(reshape(squeeze(sum(dot(A,repmat(X,1,1, 3)))) - b,1,1,3),3,3,1),3)*X - mu*X)


%%
ALPHA = .005;
MAX_ITER = 10900;
TOL = .0001;
%%
X_final = zeros(size(mus,2),2,1)
for i=1:size(mus,2)
    tmp = SDP_REGRESSION(f, df, A,X,mus(i),x_true,TOL, MAX_ITER, ALPHA,a,0);
    X_final(i,:,1) = tmp
end




